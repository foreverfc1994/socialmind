{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Dashboard">
    <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">

    <title>DASHGUM - Bootstrap Admin Template</title>
     <link rel="stylesheet" href="{% static 'assets0/layui/css/layui.css' %}"  media="all">
    <script src="{% static 'assets0/layui/layui.js' %}"></script>
    <link href="{% static 'backgroundfiles/DataTables-1.10.15/media/css/dataTables.bootstrap.css' %}">
    <script type="text/javascript" charset="utf8"
            src="{% static 'backgroundfiles/DataTables-1.10.15/media/js/jquery.js' %}"></script>

    <link rel="stylesheet" type="text/css"
          href="{% static 'backgroundfiles/DataTables-1.10.15/media/css/jquery.dataTables.css' %}">

    <!-- jQuery -->
    <!-- DataTables -->
    <script type="text/javascript" charset="utf8"
            src="{% static 'backgroundfiles/DataTables-1.10.15/media/js/jquery.dataTables.js' %}"></script>
    <!-- Bootstrap core CSS -->
    <link href="{% static 'backgroundfiles/assets/css/bootstrap.css' %}" rel="stylesheet">
    <!--external css-->
    <link href="{% static 'backgroundfiles/assets/font-awesome/css/font-awesome.css' %}" rel="stylesheet"/>

    <!-- Custom styles for this template -->
    <link href="{% static 'backgroundfiles/assets/css/style.css' %}" rel="stylesheet">
    <link href="{% static 'backgroundfiles/assets/css/style-responsive.css' %}" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
{#    <!-- <script src="{% static 'backgroundfiles/assets/js/jquery-3.3.1.min.js' %}"></script> -->#}
    {#    <link href="{% static 'assets0/layui/css/layui.css' %}">#}

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>

    <!-- (Optional) Latest compiled and minified JavaScript translation files -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/i18n/defaults-*.min.js"></script>
    <style>
        .sq_list li.f_input #em {
            margin-left: 195px;
            line-height: 32px;
            color: #666;
            font-size: 13px;
        }

        #uploadImg {
            cursor: pointer;
            overflow: hidden;
            position: relative;
            width: 104px;
            height: 32px;
        }

        #file {
            cursor: pointer;
            position: absolute;
            z-index: 100;
            left: 0;
            top: 0;
            width: 104px;
            height: 32px;
            opacity: 0;
            filter: alpha(opacity=0);
        }

        #uploadImg a {
            cursor: pointer;
            background: #0e2d43;
            position: absolute;
            top: 0;
            left: 0;
            display: block;
            width: 104px;
            height: 32px;
            text-align: center;
            line-height: 32px;
            color: white;
            font-size: 14px;
            font-weight: normal;
        }
    </style>
</head>

<body>

<section id="container">
    <!-- **********************************************************************************************************************************************************
    TOP BAR CONTENT & NOTIFICATIONS
    *********************************************************************************************************************************************************** -->
    <!--header start-->
    <header class="header black-bg">
        <div class="sidebar-toggle-box">
            <div class="fa fa-bars tooltips" data-placement="right" data-original-title="Toggle Navigation"></div>
        </div>
        <!--logo start-->
        <a href="/bindex/" class="logo"><b>SocialMind管理员</b></a>
        <!--logo end-->
        <div class="nav notify-row" id="top_menu">
            <!--  notification start -->
            <ul class="nav top-menu">
                <!-- settings start -->
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="/bindex/">
                        <i class="fa fa-tasks"></i>
                        个人中心
                    </a>
                </li>
                <!-- inbox dropdown start-->
                <li id="header_inbox_bar" class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="/bindex/">
                        <i class="fa fa-envelope-o"></i>
                        消息
                        <span class="badge bg-theme">5</span>
                    </a>
                    <ul class="dropdown-menu extended inbox">
                        <div class="notify-arrow notify-arrow-green"></div>
                        <li>
                            <p class="green">You have 5 new messages</p>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <span class="photo"><img alt="avatar"
                                                         src="{% static 'backgroundfiles/assets/img/ui-zac.jpg' %}"></span>
                                <span class="subject">
                                    <span class="from">Zac Snider</span>
                                    <span class="time">Just now</span>
                                    </span>
                                <span class="message">
                                        Hi mate, how is everything?
                                    </span>
                            </a>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <span class="photo"><img alt="avatar"
                                                         src="{% static 'backgroundfiles/assets/img/ui-divya.jpg' %}"></span>
                                <span class="subject">
                                    <span class="from">Divya Manian</span>
                                    <span class="time">40 mins.</span>
                                    </span>
                                <span class="message">
                                     Hi, I need your help with this.
                                    </span>
                            </a>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <span class="photo"><img alt="avatar"
                                                         src="{% static 'backgroundfiles/assets/img/ui-danro.jpg' %}"></span>
                                <span class="subject">
                                    <span class="from">Dan Rogers</span>
                                    <span class="time">2 hrs.</span>
                                    </span>
                                <span class="message">
                                        Love your new Dashboard.
                                    </span>
                            </a>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <span class="photo"><img alt="avatar"
                                                         src="{% static 'backgroundfiles/assets/img/ui-sherman.jpg' %}"></span>
                                <span class="subject">
                                    <span class="from">Dj Sherman</span>
                                    <span class="time">4 hrs.</span>
                                    </span>
                                <span class="message">
                                        Please, answer asap.
                                    </span>
                            </a>
                        </li>
                        <li>
                            <a href="/bindex/">See all messages</a>
                        </li>
                    </ul>
                </li>
                <!-- inbox dropdown end -->
                <li class="dropdown">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="/bindex/">
                        <i class="fa fa-cog"></i>
                        设置
                    </a>
                    <ul class="dropdown-menu extended tasks-bar">
                        <div class="notify-arrow notify-arrow-green"></div>
                        <li>
                            <p class="green">You have 4 pending tasks</p>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <div class="task-info">
                                    <div class="desc">DashGum Admin Panel</div>
                                    <div class="percent">40%</div>
                                </div>
                                <div class="progress progress-striped">
                                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                                        <span class="sr-only">40% Complete (success)</span>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <div class="task-info">
                                    <div class="desc">Database Update</div>
                                    <div class="percent">60%</div>
                                </div>
                                <div class="progress progress-striped">
                                    <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                                        <span class="sr-only">60% Complete (warning)</span>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <div class="task-info">
                                    <div class="desc">Product Development</div>
                                    <div class="percent">80%</div>
                                </div>
                                <div class="progress progress-striped">
                                    <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="80"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                                        <span class="sr-only">80% Complete</span>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="/bindex/">
                                <div class="task-info">
                                    <div class="desc">Payments Sent</div>
                                    <div class="percent">70%</div>
                                </div>
                                <div class="progress progress-striped">
                                    <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="70"
                                         aria-valuemin="0" aria-valuemax="100" style="width: 70%">
                                        <span class="sr-only">70% Complete (Important)</span>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="external">
                            <a href="#">See All Tasks</a>
                        </li>
                    </ul>
                </li>
                <!-- settings end -->

            </ul>
            <!--  notification end -->
        </div>
        <div class="top-menu">
            <ul class="nav pull-right top-menu">
                <li>
                    <form class="navbar-form navbar-right" role="search">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search here..."
                                   aria-describedby="basic-addon2" style="height: 28px;margin-top: 7px">
                            <button type="submit" class="btn btn-default"
                                    style="height:28px;border: 1px solid #666666 !important;-webkit-border-radius: 4px;background-color: #ffd777;margin-right: 10px;margin-top: 7px;color: #666666;border-radius: 4px;">
                                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                            </button>
                        </div>
                    </form>
                </li>
                <li><a class="logout" href="/login/">注销</a></li>
            </ul>
        </div>
    </header>
    <!--header end-->

    <!-- **********************************************************************************************************************************************************
    MAIN SIDEBAR MENU
    *********************************************************************************************************************************************************** -->
    <!--sidebar start-->
    <aside>
        <div id="sidebar" class="nav-collapse ">
            <!-- sidebar menu start-->
            <ul class="sidebar-menu" id="nav-accordion">

                <p class="centered"><a href="/bindex/"><img src="{% static 'backgroundfiles/assets/img/ny.jpg' %}"
                                                            class="img-circle" width="60"></a></p>
                <h5 class="centered"><a href="/bindex/" style="color: white">首页</a></h5>

                <!--<li class="mt">
                    <a class="active" href="index.html">
                        <i class="fa fa-dashboard"></i>
                        <span>爬虫</span>
                    </a>
                </li>-->
                <li class="sub-menu">
                    <a href="javascript:;" class="active">
                        <i class="fa fa-dashboard"></i>
                        <span>爬虫</span>
                    </a>
                    <ul class="sub">
                        <li><a href="/SpiderList/" style="color: #fff;">爬虫管理</a></li>
                        <script>
                            $(document).ready(function () {
                                $("li:not([class])>a:not(a:contains('爬虫管理'))").hover(function () {
                                    $("a:contains('爬虫管理')").removeAttr("style")
                                });
                            });
                        </script>
                        <li><a href="/SpiderMonitor/">爬虫监控</a></li>
                        <li><a href="/SpiderConfigure/">爬虫配置</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;">
                        <i class="fa fa-tasks"></i>
                        <span>源数据展示模块</span>
                    </a>
                    <ul class="sub">
                        <li><a href="/Author/">作者管理</a></li>
                        <li><a href="/ArticlesOfAuthor/">查看作者相关文章</a></li>
                        <li><a href="/articlelist/">文章管理</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;">
                        <i class="fa fa-desktop"></i>
                        <span>数据清洗</span>
                    </a>
                    <ul class="sub">
                        <!-- <li><a href="/DataCleanStatistics/">清洗数据统计</a></li> -->
                        <li><a href="/DataCleanStrategies/">数据清洗策略配置</a></li>
                        <li><a href="/DataCleanLog/">数据清洗日志管理</a></li>
                        <li><a href="/washData/">数据清洗</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="/topics/">
                        <i class="fa fa-book"></i>
                        <span>主题管理</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;">
                        <i class="fa fa-cogs"></i>
                        <span>舆情对象管理</span>
                    </a>
                    <ul class="sub">
                        <li><a href="/AddEventObject/">新增舆情对象</a></li>
                        <li><a href="/CreateEventObject/">舆情对象自动生成</a></li>
                        <li><a href="/objectshow/">舆情对象展示</a></li>
                    </ul>
                </li>
                <li class="sub-menu">
                    <a href="javascript:;">
                        <i class="fa fa-tasks"></i>
                        <span>语义工具集</span>
                    </a>
                    <ul class="sub">
                        <li><a href="/semanticsTools/">新增语义工具</a></li>
                        <li><a href="/semanticsToolkits/">新增工具包</a></li>
                        <li><a href="/ShowToolkits/">工具包展示</a></li>
                    </ul>
                </li>
                <!--<li class="sub-menu">
                    <a href="javascript:;" >
                        <i class="fa fa-th"></i>
                        <span>系统操作管理</span>
                    </a>
                    <ul class="sub">
                        <li><a  href="basic_table.html">系统用户评论管理</a></li>
                        <li><a  href="responsive_table.html">系统用户操作管理</a></li>
                    </ul>
                </li>-->
                <li class="sub-menu">
                    <a href="/usrCommentsSelect/">
                        <i class="fa fa-th"></i>
                        <span>用户留言管理</span>
                    </a>
                    <!--  -->
                </li>
                <li class="sub-menu">
                    <a href="/AssignAuthorities/">
                        <i class=" fa fa-bar-chart-o"></i>
                        <span>权限管理</span>
                    </a>
                </li>
                <li class="sub-menu">
                    <a href="/usrManagement/">
                        <i class=" fa fa-bar-chart-o"></i>
                        <span>用户管理</span>
                    </a>
                    <!-- <ul class="sub">
                      <li><a  href="/usersVerify/">新增用户审核</a></li>
                      <li><a  href="/usrManagement/">用户管理</a></li>
                    </ul> -->
                </li>
                <li class="sub-menu">
                    <a href="/operateDiary/">
                        <i class=" fa fa-bar-chart-o"></i>
                        <span>日志管理</span>
                    </a>
                    <!--<ul class="sub">
                        <li><a  href="morris.html">操作日志</a></li>
                    </ul>-->
                </li>

            </ul>
            <!-- sidebar menu end-->
        </div>
    </aside>
    <!--sidebar end-->

    <!-- **********************************************************************************************************************************************************
    MAIN CONTENT
    *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content">
        <section class="wrapper site-min-height">
            <h3><i class="fa fa-angle-right"></i> 爬虫列表</h3>

            <div class="row mt">
                <div class="col-lg-12">
                    <button class="layui-btn layui-btn-radius layui-btn-primary" onclick="addspider()">添加爬虫<i
                            class="layui-icon">&#xe654;</i>
                    </button>
                    <button class="layui-btn layui-btn-radius layui-btn-primary" onclick="addconfig()">添加配置<i
                            class="layui-icon">&#xe654;</i>
                    </button>
                </div>
            </div>

            <div class="row mt">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <table id="table_id_example" class="display">
                            <thead>
                            <tr>
                                <th>爬虫ID</th>
                                <th>序号</th>
                                <th>爬虫名称</th>
                                <th>爬虫路径</th>
                                <th>添加时间</th>
                                <th>网站名称</th>
                                <th>运行命令</th>
                                <th>爬虫配置</th>
                                {#                                <th>爬虫状态</th>#}
                                <th>节点</th>

                                <th>操作</th>

                            </tr>
                            </thead>
                            <!-- <tfoot>
                            <tr>
                                <th>数据表名</th>
                                <th>数据库名</th>
                                <th>网站</th>
                                <th>类型</th>
                                <th>数据量</th>

                            </tr>
                            </tfoot> -->
                            <tbody id="tbody">
                            </tbody>
                        </table>

                        <!--<div class="panel-body">-->


                    </div>
                </div>
            </div>

            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">增加爬虫</h4>
                        </div>
                        <div class="modal-body">
                            <form id="addform">
                                <div class="form-group">
                                    <label for="spider-name" class="control-label">爬虫名字</label>
                                    <input type="text" class="form-control" id="spider-name" name="spider-name">
                                </div>
                                <div class="form-group">
                                    <label for="website" class="control-label">网站</label>
                                    <input type="text" class="form-control" id="website" name="website">
                                </div>
                                <div class="form-group">
                                    <label for="website" class="control-label">本地文件路径</label>
                                    <input type="file" id="path" name="path">

{#                                <div class="layui-upload">#}
{#                                    <button type="button" class="layui-btn layui-btn-normal" id="test8">选择文件</button>#}
                                    {#                                    <button type="button" class="layui-btn" id="test9">开始上传</button>#}
                                </div>
                                <br>
                                <div class="form-group">
                                    <label for="config" class="control-label">爬虫配置</label>


                                    <select id='selectpicker' class="selectpicker" data-style="btn-info" name="config">

                                    </select>
                                    <label for="config" class="control-label">节点</label>
                                    <select id='selectpicker' class="selectpicker" data-style="btn-info" name="vm">
                                        <option>VM01</option>
                                        <option>VM02</option>
                                        <option>VM03</option>
                                        <option>VM04</option>
                                        <option>VM05</option>
                                        <option>VM06</option>
                                        <option>VM07</option>
                                        <option>VM08</option>


                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="jianjie" class="control-label">运行指令</label>
                                    <input type="text" class="form-control" id="command" name="command">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">

                            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-primary" onclick="subspider()">确定</button>
                        </div>
                    </div>
                </div>
            </div>
        </section><!--/wrapper -->
    </section><!-- /MAIN CONTENT -->

    <!--main content end-->
    <!--footer start-->
    <footer class="site-footer">
        <div class="text-center">
            2018 - <a href="http://www.xjtu.edu.cn" target="_blank" title="西安交通大学">西安交通大学</a> - <a
                href="http://www.xjtu.edu.cn" title="social mind" target="_blank">social mind舆情分析平台</a>
            <a href="#" class="go-top">
                <i class="fa fa-angle-up"></i>
            </a>
        </div>
    </footer>
    <!--footer end-->
</section>

<!-- js placed at the end of the document so the pages load faster -->
{#<script src="{% static 'backgroundfiles/assets/js/jquery.js' %}"></script>#}
<script src="{% static 'backgroundfiles/assets/js/bootstrap.min.js' %}"></script>
<script src="{% static 'backgroundfiles/assets/js/jquery-ui-1.9.2.custom.min.js' %}"></script>
<script src="{% static 'backgroundfiles/assets/js/jquery.ui.touch-punch.min.js' %}"></script>
<script class="include" type="text/javascript"
        src="{% static 'backgroundfiles/assets/js/jquery.dcjqaccordion.2.7.js' %}"></script>
<script src="{% static 'backgroundfiles/assets/js/jquery.scrollTo.min.js' %}"></script>
<script src="{% static 'backgroundfiles/assets/js/jquery.nicescroll.js' %}" type="text/javascript"></script>


<!--common script for all pages-->
<script src="{% static 'backgroundfiles/assets/js/common-scripts.js' %}"></script>

<!--script for this page-->

<script>
    //custom select box

    $(function () {

        $.ajax({
            url: '/getspiderconfig/',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                {#layer.msg(11111)#}
                datas = data.data
                var select = $("#selectpicker")
                for (i in datas) {
                    console.log(datas[i]['configname'])
                    select.append('<option value="' + datas[i]['configname'] + '">' +
                        datas[i]['configname'] + '</option>')
                    console.log('<option value="' + datas[i]['configname'] + '">' +
                        datas[i]['configname'] + '</option>')
                }
                $('.selectpicker').selectpicker('val', '');
				$('.selectpicker').selectpicker('refresh');
            }
        });
        $(window).on('load', function() {
			$('.selectpicker').selectpicker('refresh');
		})
        $.ajax({
            url: '/getspiderlist/',
            type: 'GET',
            dataType: 'json',
            success: function (data) {
                var item = 0
                datas = data.data
                options = {
                    "order": [0, "asc"],
                    "bAutoWidth": true,
                    "bProcessing": true,
                    "aLengthMenu": [[10, 30, -1], [20, 30, "全部"]],
                    "language": {
                        "lengthMenu": " 每页_MENU_条记录",
                        "zeroRecords": "没有找到记录",
                        "info": "第_PAGE_页(共_PAGES_页)",
                        "infoEmpty": "无记录",
                        "infoFiltered": "(从_MAX_条记录过滤)",
                        "oPaginate": {
                            "sFirst": "首页",
                            "sPrevious": "上页",
                            "sNext": "下页",
                            "sLast": "末页"
                        },
                        "sSearch": "搜索: ",
                        "sLoadingRecords": "正在加载数据-请等待...",
                    },
                    data: datas,
                    columns: [
                        {data: 'spiderid', 'visible': false},
                        {#{"data": "serialNum", "render": function(){#}
                        {#        item++;#}
                        {#        return item;#}
                        {
                            data: null, "render": function () {
                                item++;
                                return item;
                            }
                        },
                        {data: 'spidername'},

                        {data: 'spiderpath'},
                        {data: 'addtime'},
                        {data: 'website'},
                        {data: 'runcommand'},
                        {data: 'spiderconfigid'},
                        {#{data: 'spiderstate'},#}
                        {data: 'vimname'},

                        {
                            data: null, 'width': '180px', 'render': function button(data) {
                                {#console.log(data.spiderstate)#}
                                if (data.spiderstate == '暂停') {

                                    return '<div class="btn-group" role="group" aria-label="...">\n' +
                                        '                                        <button id = "' + data.spiderid + '_run" type="button" class="btn btn-info" onclick = \'runspider("' + data.spiderid + '")\'>开启</button>\n' +
                                        '                                        <button id = "' + data.spiderid + '_stop" type="button" class="btn btn-info" disabled="disabled" onclick = \'stopspider("' + data.spiderid + '")\'>停止</button>\n' +
                                        '                                        <button type="button" class="btn btn-danger" onclick = \'delspider("' + data.spiderid + '")\'>删除</button>\n' +
                                        '                                    </div>'
                                }
                                else {
                                    return '<div class="btn-group" role="group" aria-label="...">\n' +
                                        '                                        <button id = "' + data.spiderid + '_run" type="button" class="btn btn-info" disabled="disabled" onclick = \'runspider("' + data.spiderid + '")\'>开启</button>\n' +
                                        '                                        <button id = "' + data.spiderid + '_stop" type="button" class="btn btn-info" onclick = \'stopspider("' + data.spiderid + '")\'>停止</button>\n' +
                                        '                                        <button type="button" class="btn btn-danger" onclick = \'delspider("' + data.spiderid + '")\'>删除</button>\n' +
                                        '                                    </div>'
                                }

                            }
                        },
                    ]
                };

                var table = $('#table_id_example').DataTable(options);

            },
            error: function (data) {
                alert("数据获取失败");
            }
        });

        $('select.styled').customSelect();
    });

</script>
<script>
    function addspider() {

        $('#myModal').modal(
            {
                backdrop: 'static'
            }
        )
    }

    function subspider() {
        var form  = $('#addform')
        var formdata = new FormData(form[0])
        $.ajax({
            type: "POST",//方法类型
            dataType: "json",//预期服务器返回的数据类型
            url: "/addspider/" ,//url
            data: formdata,
            processData:false,
            contentType:false,

        })
        $('#myModal').modal('hide')
    }

    layui.use('upload', function () {
        var $ = layui.jquery
            , upload = layui.upload;
        var uploadInst = upload.render({
            elem: '#test8'
            , url: '/upload/'
            , auto: false
            //,multiple: true
            , bindAction: '#test9'
            , done: function (res) {
                console.log(res)
            }
        });
    })

    function addconfig() {
        document.location.href = '/SpiderConfigure/'
    }

    function runspider(id) {

        {#layer.msg(id +'run'+'#'+id+'_stop')#}
        $('#' + id + '_stop').removeAttr('disabled', 'disabled')
        $('#' + id + '_run').attr('disabled', 'disabled')
        $.ajax({
            url: '/runspider/',
            type: 'POST',
            dataType: 'json',
            data: {'id': id},
            success: function (data) {
                layer.msg('启动成功')
            },
            error: function (data) {
                layer.msg('启动失败')
            }

        })
        {#layer.msg('11111')#}
    }

    function stopspider(id) {
        {#layer.msg(id +'stop')#}
        $('#' + id + '_run').removeAttr('disabled', 'disabled')
        $('#' + id + '_stop').attr('disabled', 'disabled')
        $.ajax({
            url: '/stopspider/',
            type: 'POST',
            dataType: 'json',
            data: {'id': id},
            success: function (data) {
                layer.msg('停止成功')
            },
            error: function (data) {
                layer.msg('停止失败')
            }
        })
    }

    function delspider(id) {
        $.ajax({
            url: '/delspider/',
            type: 'POST',
            dataType: 'json',
            data: {'id': id},
            success: function (data) {
                layer.msg('停止成功')
            },
            error: function (data) {
                layer.msg('停止失败')
            }
        })
    }
</script>
</body>
</html>
